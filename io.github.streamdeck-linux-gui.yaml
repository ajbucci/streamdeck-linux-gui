---
app-id: io.github.streamdeck-linux-gui
command: streamdeck
runtime: org.kde.Platform
runtime-version: "6.6"
sdk: org.kde.Sdk
separate-locales: false
finish-args:
  - "--device=all"
  - "--share=ipc"
  - "--share=network"
  - "--socket=wayland"
  - "--socket=x11"
  - "--filesystem=home:rw"
  - "--talk-name=org.kde.StatusNotifierWatcher"
cleanup:
modules:
  - name: libusb
    config-opts:
      - "--disable-static"
      - "--disable-udev"
    cleanup:
      - "/lib/*.la"
      - "/lib/pkgconfig"
      - "/include"
    sources:
      - type: "archive"
        url: "https://github.com/libusb/libusb/archive/refs/tags/v1.0.26.tar.gz"
        sha256: "a09bff99c74e03e582aa30759cada218ea8fa03580517e52d463c59c0b25e240"
    post-install:
      - "install -Dm644 COPYING /app/share/licenses/libusb/COPYING"
  - name: hidapi
    buildsystem: autotools
    sources:
      - type: git
        url: https://github.com/libusb/hidapi.git
        tag: hidapi-0.14.0
        x-checker-data:
          - type: git
            tag-pattern: "^hidapi-([\\d.]+)$"
        commit: "d3013f0af3f4029d82872c1a9487ea461a56dee4"
  - name: pyside6
    only-arches:
      - x86_64
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "pyside6" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/60/4d/4ccb1e1c58d62da887c7fe881cdaa80fc1ea07057af8edb6c4cc50b33704/PySide6-6.5.2-cp37-abi3-manylinux_2_28_x86_64.whl
        sha256: e6d879ca0f8827a7866856fbedd08857e4bd8f9a858dc998dea10d1913e97938
    modules:
      - name: pyside6-addons
        only-arches:
          - x86_64
        buildsystem: simple
        build-commands:
          - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
            --prefix=${FLATPAK_DEST} "pyside6-addons" --no-build-isolation
        sources:
          - type: file
            url: https://files.pythonhosted.org/packages/28/d6/c1826931f8a56b17650f8fe12db6ebbf308bf60aa9553b50c20a967eeb78/PySide6_Addons-6.5.2-cp37-abi3-manylinux_2_28_x86_64.whl
            sha256: bea98d823179b814109dcf3ac6c8a0eddf886570aa9ef8ef09b6bae37bc227ca
        modules:
          - name: pyside6-essentials
            only-arches:
              - x86_64
            buildsystem: simple
            build-commands:
              - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
                --prefix=${FLATPAK_DEST} "pyside6-essentials" --no-build-isolation
            sources:
              - type: file
                url: https://files.pythonhosted.org/packages/d0/de/9a089e91c2e0fe4f122218bba4f9dbde46338659f412739bd9db1ed9df4f/PySide6_Essentials-6.5.2-cp37-abi3-manylinux_2_28_x86_64.whl
                sha256: 1620e82b38714a1570b142c01694d0415a25526517b24620ff9b00c9f76cfca9
            modules:
              - name: shiboken6
                buildsystem: simple
                build-commands:
                  - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
                    --prefix=${FLATPAK_DEST} "shiboken6" --no-build-isolation
                sources:
                  - type: file
                    url: https://files.pythonhosted.org/packages/55/44/d8c366dd4f069166ab9890acb44d004c5e6122714e44c169273dcbbca897/shiboken6-6.5.2-cp37-abi3-manylinux_2_28_x86_64.whl
                    sha256: 3fbc35ff3c19e7d39433671bfc1be3d7fa9d071bfdd0ffe1c2a4d27acd6cf6a5
  - generated-poetry-sources.json
  - name: streamdeck_linux_gui
    buildsystem: simple
    build-commands:
    - "pip3 install --no-index --find-links=\".\" --prefix=${FLATPAK_DEST} streamdeck_linux_gui"
    sources:
      - type: file
        path: dist/streamdeck_linux_gui-4.0.0-py3-none-any.whl